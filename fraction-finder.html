<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fraction Finder</title>
    <link rel="stylesheet" href="ffstyles.css">
</head>

<body>

<h1>Fraction Finder</h1>
<p>Enter a decimal value in inches:</p>
<input type="number" id="decimalInput" step="0.000001" placeholder="e.g. 0.36" />
<div class="button-container">
    <button onclick="convertDecimal()">Convert</button>
    <button onclick="clearInput()">Clear</button>
</div>

<h3 id="resultFraction"></h3>
<div id="scale"></div>

<script>
    function gcd(a, b) {
        return b === 0 ? a : gcd(b, a % b);
    }

    function simplifyFraction(numerator, denominator) {
        const divisor = gcd(numerator, denominator);
        return [numerator / divisor, denominator / divisor];
    }

    function convertDecimal() {
        const input = parseFloat(document.getElementById('decimalInput').value);
        if (isNaN(input)) {
            alert("Please enter a valid decimal number.");
            return;
        }

        // Convert input to inches in sixteenths
        const fractionNumerator = Math.round(input * 16); // Convert to sixteenths
        const nearestFraction = fractionNumerator / 16;

        // Get the whole number and the remaining numerator for the fraction
        const wholeNumber = Math.floor(nearestFraction);
        const numerator = fractionNumerator % 16;

        // Simplify the fraction to simplest terms
        let fractionString;
        if (numerator === 0) {
            fractionString = `${wholeNumber}`;
        } else {
            const [simplifiedNumerator, simplifiedDenominator] = simplifyFraction(numerator, 16);
            if (wholeNumber > 0) {
                fractionString = `${wholeNumber} ${simplifiedNumerator}/${simplifiedDenominator}`;
            } else {
                fractionString = `${simplifiedNumerator}/${simplifiedDenominator}`;
            }
        }

        document.getElementById('resultFraction').innerText = `Nearest Fraction: ${fractionString}`;

        // Display the scale
        const scale = document.getElementById('scale');
        const pointerPosition = (input) * 100; // Use the exact decimal value for positioning
        scale.innerHTML = ''; // Clear previous scale

        // Create tick marks for 0 to 1 inch
        for (let i = 0; i <= 16; i++) { // Total of 16 ticks for full 1 inch
            const tick = document.createElement('div');
            tick.className = 'tick';
            if (i % 16 === 0) { // 1 inch tick
                tick.classList.add('tick-1-2');
            } else if (i % 8 === 0) { // 1/2 inch tick
                tick.classList.add('tick-1-2');
            } else if (i % 4 === 0) { // 1/4 inch tick
                tick.classList.add('tick-1-4');
            } else if (i % 2 === 0) { // 1/8 inch tick
                tick.classList.add('tick-1-8');
            } else { // 1/16 inch tick
                tick.classList.add('tick-1-16');
            }
            tick.style.left = `${(i / 16) * 100}%`; // Position based on total ticks
            scale.appendChild(tick);
        }
        // Add pointer to indicate decimal point on the scale
        const pointer = document.createElement('div');
        pointer.className = 'pointer';
        pointer.style.left = `${pointerPosition}%`;
        scale.appendChild(pointer);
    }

    function clearInput() {
        document.getElementById('decimalInput').value = '';
        document.getElementById('resultFraction').innerText = '';
        document.getElementById('scale').innerHTML = ''; // Clear the scale, including the pointer
    }
</script>
</body>

</html>